# 前缀和

## 定义

> 一个节点的前缀和就是`该节点`到`根`之间的路径和





## 相关题目

#### [437. 路径总和 III](https://leetcode-cn.com/problems/path-sum-iii/)

题目描述：给定一个二叉树的根节点 root，和一个整数 $targetSum$，求该二叉树里节点值之和等于 $targetSum$ 的 路径 的数目。

这里的路径是指：不需要从根节点开始，也不需要在叶子节点结束，但是路径方向必须是向下的（只能从父节点到子节点）

`思路` 应用`前缀和`，我们只用遍历整颗树一次，记录每个节点的前缀和，并查询该节点的祖先节点中符合条件的个数，将这个数量加到最终结果上

```C++
class Solution {
public:
    unordered_map<int, int> prefixMap;
    int target;

    int pathSum(TreeNode* root, int targetSum) {
        target = targetSum;
        prefixMap[0] = 1;
        return backtrack(root, 0);
    }

    int backtrack(TreeNode* node, int curSum){
        if(node == NULL) return 0;

        int count = 0; // 一定要初始化为 0 

        curSum += node->val;

        count += prefixMap[curSum - target];
        prefixMap[curSum] += 1;

        count += backtrack(node->left, curSum);
        count += backtrack(node->right, curSum);

        prefixMap[curSum] -= 1;

        return count;
    }
};
```

