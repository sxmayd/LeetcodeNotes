# 堆

## 简述

优先队列时一种比较重要的数据结构，它是由二项队列编写而成的，可以以`O(log n) `的效率查找一个队列中的最大值或者最小值，其中是最大值还是最小值是根据创建的优先队列的性质来决定的。

## C++ priority_queue用法（大顶堆，小顶堆）

优先队列有三个参数，其声明形式为：

```C++
priority_queue<type, container, function> 
```

后两个参数可以省略，第一个参数不能省略

- **type：**数据类型
- **container：**实现优先队列的底层容器
- **function：**元素之间的比较方式

`注` 对于container，要求必须是数组形式实现的容器，例如vector、deque，而不能使list
`注` 在STL中，默认情况下（不加后面两个参数）是以vector为容器，以 $operator<$​ 为比较方式，所以在只使用第一个参数时，`优先队列默认是一个最大堆`，每次输出的堆顶元素是此时堆中的最大元素。构建大顶堆：

```C++
priority_queue<int> max_heap;
```

或者：

```C++
/** 默认比较函数为less, 大顶堆 **/
priority_queue<int, vector<int>, less<int>> max_heap;
```

构建小顶堆：

```C++
/** 使用greater比较函数，小顶堆 **/
priority_queue<int, vector<int>, greater<int>> min_heap;
```

## 成员函数

假设type类型为int，则：

- bool empty() const 返回值为true，说明队列为空
- int size() const 返回优先队列中元素的数量
- void pop() 删除队列顶部的元素，也即根节点
- int top() 返回队列中的顶部元素，但不删除该元素
- void push(int arg) 将元素arg插入到队列之中

## 易混淆的 greater() 和 less()

### 设计自定义比较函数中的 ‘> <’

$ > $ 从大到小 降序 排序  == greater() 从大到小

$ < $​ 从小到大 升序 排序 == less() 从小到大 【默认】

|         方法或容器          | less<T>()的顺序(默认) | greater<T>()的顺序 |
| :-------------------------: | :-------------------: | :----------------: |
| priority_queue 全是反过来的 |      降序 大->小      |    升序 小->大     |
|            sort             |      升序 小->大      |    降序 大->小     |
|             map             |      升序 小->大      |    降序 大->小     |
|             map             |      升序 小->大      |    降序 大->小     |

>  **除了priority_queue使用的是堆，导致全部大小比较反了过来，其他均是正常符合逻辑的操作**
>
> 即判断为func(a,b)判断为true则a在前**。**只有priority_queue特殊，如果`func(a,b)`判断为true，优先级队列中b在前